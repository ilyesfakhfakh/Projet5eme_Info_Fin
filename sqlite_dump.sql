CREATE TABLE `users_backup` (`user_id` UUID NOT NULL UNIQUE PRIMARY KEY, `username` VARCHAR(100) NOT NULL UNIQUE, `email` VARCHAR(150) NOT NULL UNIQUE, `password_hash` VARCHAR(255) NOT NULL, `first_name` VARCHAR(100), `last_name` VARCHAR(100), `registration_date` DATETIME, `last_login_date` DATETIME, `user_type` TEXT NOT NULL DEFAULT 'NOVICE', `profile_picture` VARCHAR(255), `phone` VARCHAR(20), `date_of_birth` DATE, `address` VARCHAR(255), `city` VARCHAR(100), `country` VARCHAR(100), `postal_code` VARCHAR(20), `timezone` VARCHAR(50) DEFAULT 'UTC', `language` VARCHAR(10) DEFAULT 'fr', `currency` VARCHAR(3) DEFAULT 'EUR', `notes` TEXT, `is_active` TINYINT(1) NOT NULL DEFAULT 1, `is_locked` TINYINT(1) NOT NULL DEFAULT 0, `login_attempts` INTEGER NOT NULL DEFAULT '0', `email_verified` TINYINT(1) NOT NULL DEFAULT 0, `two_factor_enabled` TINYINT(1) NOT NULL DEFAULT 0, `two_factor_secret` VARCHAR(255), `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `roles` (`role_id` UUID NOT NULL PRIMARY KEY, `role_name` TEXT NOT NULL UNIQUE, `permissions` JSON DEFAULT '[]', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `sessions` (`session_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `login_time` DATETIME, `last_activity` DATETIME, `expires_at` DATETIME, `user_agent` VARCHAR(255), `ip_address` VARCHAR(45), `is_active` TINYINT(1) NOT NULL DEFAULT 1, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `user_roles` (`user_role_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `role_id` UUID NOT NULL REFERENCES `roles` (`role_id`) ON DELETE CASCADE ON UPDATE CASCADE, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, UNIQUE (`user_id`, `role_id`));

CREATE TABLE `email_verification_tokens` (`token_id` INTEGER PRIMARY KEY AUTOINCREMENT, `user_id` UUID NOT NULL REFERENCES `users` (`user_id`), `token` VARCHAR(6) NOT NULL, `expires_at` DATETIME NOT NULL, `is_used` TINYINT(1) NOT NULL DEFAULT 0, `created_at` DATETIME NOT NULL, `updated_at` DATETIME);

CREATE TABLE `portfolios` (`portfolio_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `portfolio_name` VARCHAR(150) NOT NULL, `base_currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `creation_date` DATETIME, `last_update_date` DATETIME, `is_active` TINYINT(1) NOT NULL DEFAULT 1, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, initial_balance DECIMAL(18,2) NOT NULL DEFAULT 0, current_balance DECIMAL(18,2) NOT NULL DEFAULT 0, total_value DECIMAL(18,2) NOT NULL DEFAULT 0, profit_loss DECIMAL(18,2) NOT NULL DEFAULT 0, profit_loss_percentage DECIMAL(9,4) NOT NULL DEFAULT 0);

CREATE TABLE `positions` (`position_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `asset_id` UUID, `asset_symbol` VARCHAR(50), `asset_type` VARCHAR(30), `quantity` DECIMAL(28,10) NOT NULL DEFAULT 0, `average_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `current_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `market_value` DECIMAL(18,4) NOT NULL DEFAULT 0, `unrealized_pl` DECIMAL(18,4) NOT NULL DEFAULT 0, `unrealized_pl_percentage` DECIMAL(9,4) NOT NULL DEFAULT 0, `open_date` DATETIME, `last_update_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, is_archived BOOLEAN NOT NULL DEFAULT 0);

CREATE TABLE `transactions` (`transaction_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `asset_id` UUID, `transaction_type` TEXT NOT NULL, `quantity` DECIMAL(28,10) NOT NULL DEFAULT 0, `price` DECIMAL(18,6) NOT NULL DEFAULT 0, `total_amount` DECIMAL(18,4) NOT NULL DEFAULT 0, `commission` DECIMAL(18,4) NOT NULL DEFAULT 0, `timestamp` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `assets` (`asset_id` UUID NOT NULL PRIMARY KEY, `symbol` VARCHAR(50) NOT NULL UNIQUE, `name` VARCHAR(150) NOT NULL, `asset_type` TEXT NOT NULL, `exchange` VARCHAR(100), `sector` VARCHAR(100), `industry` VARCHAR(150), `market_cap` DECIMAL(24,2) DEFAULT 0, `is_active` TINYINT(1) NOT NULL DEFAULT 1, `last_update_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `market_data` (`data_id` UUID NOT NULL PRIMARY KEY, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE CASCADE ON UPDATE CASCADE, `timestamp` DATETIME NOT NULL, `open_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `high_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `low_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `close_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `volume` BIGINT NOT NULL DEFAULT 0, `adjusted_close` DECIMAL(18,6) NOT NULL DEFAULT 0, `change` DECIMAL(18,6) NOT NULL DEFAULT 0, `change_percent` DECIMAL(9,4) NOT NULL DEFAULT 0, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `real_time_quotes` (`quote_id` UUID NOT NULL PRIMARY KEY, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE CASCADE ON UPDATE CASCADE, `bid_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `ask_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `last_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `volume` BIGINT NOT NULL DEFAULT 0, `timestamp` DATETIME NOT NULL, `market_status` TEXT NOT NULL DEFAULT 'CLOSED', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `price_alerts` (`alert_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE CASCADE ON UPDATE CASCADE, `alert_type` TEXT NOT NULL DEFAULT 'ABOVE', `target_price` DECIMAL(18,6) NOT NULL, `is_active` TINYINT(1) NOT NULL DEFAULT 1, `is_triggered` TINYINT(1) NOT NULL DEFAULT 0, `triggered_at` DATETIME, `message` TEXT, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `orders` (`order_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE CASCADE ON UPDATE CASCADE, `order_type` TEXT NOT NULL, `side` TEXT NOT NULL, `quantity` DECIMAL(28,10) NOT NULL, `price` DECIMAL(18,6), `stop_price` DECIMAL(18,6), `time_in_force` TEXT NOT NULL DEFAULT 'DAY', `status` TEXT NOT NULL DEFAULT 'PENDING', `creation_date` DATETIME, `execution_date` DATETIME, `executed_quantity` DECIMAL(28,10) DEFAULT 0, `executed_price` DECIMAL(18,6), `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `order_executions` (`execution_id` UUID NOT NULL PRIMARY KEY, `order_id` UUID NOT NULL REFERENCES `orders` (`order_id`) ON DELETE CASCADE ON UPDATE CASCADE, `executed_quantity` DECIMAL(28,10) NOT NULL DEFAULT 0, `execution_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `execution_time` DATETIME NOT NULL, `commission` DECIMAL(18,4) NOT NULL DEFAULT 0, `execution_type` VARCHAR(50), `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `trading_strategies` (`strategy_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `strategy_name` VARCHAR(150) NOT NULL, `description` TEXT, `parameters` JSON DEFAULT '{}', `is_active` TINYINT(1) NOT NULL DEFAULT 1, `creation_date` DATETIME, `last_execution_date` DATETIME, `performance` JSON DEFAULT '{}', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `user_preferences` (`preferences_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID NOT NULL UNIQUE REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `theme` TEXT NOT NULL DEFAULT 'LIGHT', `language` VARCHAR(10) DEFAULT 'en', `currency` VARCHAR(10) DEFAULT 'USD', `notification_settings` JSON DEFAULT '{}', `dashboard_layout` JSON DEFAULT '{}', `trading_preferences` JSON DEFAULT '{}', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `historical_data` (`history_id` UUID NOT NULL PRIMARY KEY, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE CASCADE ON UPDATE CASCADE, `date` DATE NOT NULL, `open_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `high_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `low_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `close_price` DECIMAL(18,6) NOT NULL DEFAULT 0, `adjusted_close` DECIMAL(18,6) NOT NULL DEFAULT 0, `volume` BIGINT NOT NULL DEFAULT 0, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `stop_losses` (`stop_loss_id` UUID NOT NULL PRIMARY KEY, `position_id` UUID NOT NULL REFERENCES `positions` (`position_id`) ON DELETE CASCADE ON UPDATE CASCADE, `trigger_price` DECIMAL(18,6) NOT NULL, `stop_type` TEXT NOT NULL, `trigger_amount` DECIMAL(18,6) NOT NULL DEFAULT 0, `is_active` TINYINT(1) NOT NULL DEFAULT 1, `creation_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `charts` (`chart_id` UUID NOT NULL PRIMARY KEY, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE CASCADE ON UPDATE CASCADE, `chart_type` TEXT NOT NULL DEFAULT 'CANDLESTICK', `timeframe` VARCHAR(20) NOT NULL DEFAULT '1D', `annotations` JSON DEFAULT '[]', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `risk_assessments` (`assessment_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `order_id` UUID REFERENCES `orders` (`order_id`) ON DELETE SET NULL ON UPDATE CASCADE, `risk_score` DECIMAL(9,4) NOT NULL DEFAULT 0, `volatility` DECIMAL(9,4) NOT NULL DEFAULT 0, `max_drawdown` DECIMAL(9,4) NOT NULL DEFAULT 0, `sharpe_ratio` DECIMAL(9,4) NOT NULL DEFAULT 0, `recommendations` TEXT, `assessment_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `ai_recommendations` (`recommendation_id` UUID NOT NULL PRIMARY KEY, `agent_id` UUID NOT NULL REFERENCES `ai_agents` (`agent_id`) ON DELETE NO ACTION ON UPDATE CASCADE, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE NO ACTION ON UPDATE CASCADE, `recommendation_type` TEXT NOT NULL, `confidence` DECIMAL(5,2) NOT NULL DEFAULT 0, `reasoning` TEXT, `target_price` DECIMAL(18,6), `time_horizon` VARCHAR(50), `creation_date` DATETIME, `status` VARCHAR(50) DEFAULT 'ACTIVE', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `prediction_models` (`model_id` UUID NOT NULL PRIMARY KEY, `model_name` VARCHAR(150) NOT NULL, `model_type` TEXT NOT NULL, `asset_id` UUID REFERENCES `assets` (`asset_id`) ON DELETE NO ACTION ON UPDATE CASCADE, `accuracy` DECIMAL(6,3) DEFAULT 0, `predictions` JSON DEFAULT '[]', `features` JSON DEFAULT '[]', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `market_sentiments` (`sentiment_id` UUID NOT NULL PRIMARY KEY, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE NO ACTION ON UPDATE CASCADE, `timestamp` DATETIME NOT NULL, `sentiments` JSON DEFAULT '{}', `keywords` JSON DEFAULT '[]', `news_count` INTEGER DEFAULT 0, `social_media_mentions` INTEGER DEFAULT 0, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `lessons` (`lesson_id` UUID NOT NULL PRIMARY KEY, `course_id` UUID NOT NULL REFERENCES `courses` (`course_id`) ON DELETE CASCADE ON UPDATE CASCADE, `title` VARCHAR(200) NOT NULL, `content` JSON DEFAULT '{}', `lesson_type` TEXT NOT NULL DEFAULT 'TEXT', `order` INTEGER NOT NULL DEFAULT 1, `duration` INTEGER DEFAULT 0, `is_completed` TINYINT(1) NOT NULL DEFAULT 0, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `technical_indicators` (`indicator_id` UUID NOT NULL PRIMARY KEY, `asset_id` UUID NOT NULL REFERENCES `assets` (`asset_id`) ON DELETE CASCADE ON UPDATE CASCADE, `indicator_type` TEXT NOT NULL, `period` INTEGER NOT NULL, `parameters` JSON DEFAULT '{}', `values` JSON DEFAULT '[]', `last_calculation_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `indicator_values` (`value_id` UUID NOT NULL PRIMARY KEY, `indicator_id` UUID NOT NULL REFERENCES `technical_indicators` (`indicator_id`) ON DELETE CASCADE ON UPDATE CASCADE, `timestamp` DATETIME NOT NULL, `value` DECIMAL(18,6) NOT NULL DEFAULT 0, `signal` TEXT NOT NULL DEFAULT 'HOLD', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `quizzes` (`quiz_id` UUID NOT NULL PRIMARY KEY, `lesson_id` UUID NOT NULL REFERENCES `lessons` (`lesson_id`) ON DELETE CASCADE ON UPDATE CASCADE, `questions` JSON DEFAULT '[]', `passing_score` DECIMAL(5,2) NOT NULL DEFAULT 0, `time_limit` INTEGER DEFAULT 0, `attempts` INTEGER DEFAULT 0, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `economic_events` (`event_id` UUID NOT NULL PRIMARY KEY, `event_name` VARCHAR(200) NOT NULL, `description` TEXT, `scheduled_date` DATETIME NOT NULL, `importance` TEXT NOT NULL DEFAULT 'MEDIUM', `country` VARCHAR(100), `event_category` VARCHAR(100), `previous_value` DECIMAL(18,6), `actual_value` DECIMAL(18,6), `forecast_value` DECIMAL(18,6), `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `ai_agents` (`agent_id` UUID NOT NULL PRIMARY KEY, `agent_name` VARCHAR(150) NOT NULL, `agent_type` TEXT NOT NULL, `model_version` VARCHAR(50), `configuration` JSON DEFAULT '{}', `is_active` TINYINT(1) NOT NULL DEFAULT 1, `last_performance` JSON DEFAULT '{}', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `market_news` (`news_id` UUID NOT NULL PRIMARY KEY, `headline` VARCHAR(255) NOT NULL, `content` TEXT NOT NULL, `timestamp` DATETIME NOT NULL, `priority` TEXT NOT NULL DEFAULT 'LOW', `tags` JSON DEFAULT '[]', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `courses` (`course_id` UUID NOT NULL PRIMARY KEY, `title` VARCHAR(200) NOT NULL, `description` TEXT, `level` TEXT NOT NULL DEFAULT 'BEGINNER', `category` VARCHAR(100), `duration` INTEGER, `content` JSON DEFAULT '{}', `prerequisites` JSON DEFAULT '[]', `is_active` TINYINT(1) NOT NULL DEFAULT 1, `creation_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `competitions` (`competition_id` UUID NOT NULL PRIMARY KEY, `competition_name` VARCHAR(200) NOT NULL, `description` TEXT, `start_date` DATETIME, `end_date` DATETIME, `participants` JSON DEFAULT '[]', `rules` JSON DEFAULT '{}', `prizes` JSON DEFAULT '[]', `leaderboard` JSON DEFAULT '{}', `status` VARCHAR(50) DEFAULT 'PLANNED', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `game_rooms` (`room_id` UUID NOT NULL PRIMARY KEY, `room_name` VARCHAR(150) NOT NULL, `description` TEXT, `creator_id` UUID, `participants` JSON DEFAULT '[]', `scenario` JSON DEFAULT '{}', `start_date` DATETIME, `status` TEXT NOT NULL DEFAULT 'WAITING', `settings` JSON DEFAULT '{}', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `leaderboards` (`leaderboard_id` UUID NOT NULL PRIMARY KEY, `competition_id` UUID NOT NULL, `rankings` JSON DEFAULT '[]', `last_update_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `user_progress` (`progress_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `course_id` UUID NOT NULL REFERENCES `courses` (`course_id`) ON DELETE CASCADE ON UPDATE CASCADE, `completed_lessons` JSON DEFAULT '[]', `completion_percentage` DECIMAL(5,2) NOT NULL DEFAULT 0, `start_date` DATETIME, `last_access_date` DATETIME, `score` DECIMAL(6,2) DEFAULT 0, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `audit_logs` (`log_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `action` VARCHAR(150) NOT NULL, `entity_type` VARCHAR(100), `entity_id` VARCHAR(100), `old_values` JSON DEFAULT '{}', `new_values` JSON DEFAULT '{}', `timestamp` DATETIME, `ip_address` VARCHAR(45), `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `system_configurations` (`config_id` UUID NOT NULL PRIMARY KEY, `config_key` VARCHAR(150) NOT NULL UNIQUE, `config_value` TEXT, `description` TEXT, `category` VARCHAR(100), `is_active` TINYINT(1) NOT NULL DEFAULT 1, `last_modified_by` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `alm_positions` (`alm_position_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `position_id` UUID NOT NULL, `instrument_type` TEXT NOT NULL, `asset_liability` TEXT NOT NULL, `nominal_amount` DECIMAL(20,2) NOT NULL, `currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `maturity_date` DATETIME, `coupon_rate` DECIMAL(10,4) DEFAULT 0, `frequency` TEXT DEFAULT 'ANNUAL', `cashflows` JSON, `market_value` DECIMAL(20,2) NOT NULL DEFAULT 0, `duration` DECIMAL(10,4), `convexity` DECIMAL(10,4), `dv01` DECIMAL(15,6), `yield_to_maturity` DECIMAL(10,4), `modified_duration` DECIMAL(10,4), `is_active` TINYINT(1) NOT NULL DEFAULT 1, `created_by` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `interest_rate_sensitivities` (`sensitivity_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `calculation_date` DATETIME NOT NULL, `scenario_type` TEXT NOT NULL, `shock_bps` INTEGER NOT NULL DEFAULT 100, `assets_pv_change` DECIMAL(20,2) NOT NULL DEFAULT 0, `liabilities_pv_change` DECIMAL(20,2) NOT NULL DEFAULT 0, `net_pv_change` DECIMAL(20,2) NOT NULL DEFAULT 0, `assets_duration` DECIMAL(10,4) NOT NULL DEFAULT 0, `liabilities_duration` DECIMAL(10,4) NOT NULL DEFAULT 0, `duration_gap` DECIMAL(10,4) NOT NULL DEFAULT 0, `currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `yield_curve_id` UUID NOT NULL REFERENCES `yield_curves` (`yield_curve_id`) ON DELETE CASCADE ON UPDATE CASCADE, `status` TEXT NOT NULL DEFAULT 'DRAFT', `created_by` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `liquidity_gaps` (`liquidity_gap_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `calculation_date` DATETIME NOT NULL, `bucket_0_1m` DECIMAL(20,2) NOT NULL DEFAULT 0, `bucket_1_3m` DECIMAL(20,2) NOT NULL DEFAULT 0, `bucket_3_12m` DECIMAL(20,2) NOT NULL DEFAULT 0, `bucket_1_3y` DECIMAL(20,2) NOT NULL DEFAULT 0, `bucket_3_5y` DECIMAL(20,2) NOT NULL DEFAULT 0, `bucket_5y_plus` DECIMAL(20,2) NOT NULL DEFAULT 0, `total_gap` DECIMAL(20,2) NOT NULL DEFAULT 0, `currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `status` TEXT NOT NULL DEFAULT 'DRAFT', `created_by` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `admin_dashboards` (`dashboard_id` UUID NOT NULL PRIMARY KEY, `user_id` UUID NOT NULL UNIQUE REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `widgets` JSON DEFAULT '[]', `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `yield_curves` (`yield_curve_id` UUID NOT NULL PRIMARY KEY, `curve_name` VARCHAR(100) NOT NULL, `currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `curve_type` TEXT NOT NULL DEFAULT 'GOVERNMENT', `valuation_date` DATETIME NOT NULL, `maturity_points` JSON NOT NULL, `interpolation_method` TEXT NOT NULL DEFAULT 'LINEAR', `is_active` TINYINT(1) NOT NULL DEFAULT 1, `created_by` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `risk_metrics` (`metric_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `calculation_date` DATETIME NOT NULL, `metric_type` TEXT NOT NULL, `value` DECIMAL(20,6) NOT NULL, `currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `confidence_level` DECIMAL(5,4) DEFAULT 0.95, `time_horizon_days` INTEGER NOT NULL DEFAULT 1, `instrument_type` TEXT NOT NULL DEFAULT 'ALL', `calculation_method` TEXT NOT NULL DEFAULT 'HISTORICAL', `status` TEXT NOT NULL DEFAULT 'CALCULATED', `created_by` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `metadata` JSON, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `system_alerts` (`alert_id` UUID NOT NULL PRIMARY KEY, `alert_type` TEXT NOT NULL, `message` VARCHAR(255) NOT NULL, `severity` VARCHAR(50), `created_by` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `is_resolved` TINYINT(1) NOT NULL DEFAULT 0, `creation_date` DATETIME, `resolved_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `risk_logs` (`log_id` UUID NOT NULL PRIMARY KEY, `entity_type` TEXT NOT NULL, `entity_id` UUID NOT NULL, `action` TEXT NOT NULL, `user_id` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `portfolio_id` UUID REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `old_values` JSON, `new_values` JSON, `ip_address` VARCHAR(45), `user_agent` TEXT, `timestamp` DATETIME NOT NULL, `reason` TEXT, `metadata` JSON);

CREATE TABLE `stress_scenarios` (`scenario_id` UUID NOT NULL PRIMARY KEY, `name` VARCHAR(255) NOT NULL, `description` TEXT, `scenario_type` TEXT NOT NULL DEFAULT 'HYPOTHETICAL', `market_shocks` JSON NOT NULL, `probability` DECIMAL(5,4), `time_horizon_days` INTEGER NOT NULL DEFAULT 1, `is_active` TINYINT(1) NOT NULL DEFAULT 1, `created_by` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `approved_by` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `approval_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `risk_limits` (`limit_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `trader_id` UUID, `desk_id` UUID, `instrument_type` TEXT NOT NULL DEFAULT 'ALL', `limit_type` TEXT NOT NULL, `limit_value` DECIMAL(20,2) NOT NULL, `currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `time_horizon` TEXT NOT NULL DEFAULT 'DAILY', `confidence_level` DECIMAL(5,4) DEFAULT 0.95, `is_active` TINYINT(1) NOT NULL DEFAULT 1, `breach_action` TEXT NOT NULL DEFAULT 'ALERT', `created_by` UUID NOT NULL REFERENCES `users` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE, `approved_by` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `approval_date` DATETIME, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `news_articles` (`article_id` UUID NOT NULL PRIMARY KEY, `title` VARCHAR(255) NOT NULL, `content` TEXT NOT NULL, `summary` TEXT, `author` VARCHAR(150), `source` VARCHAR(150), `publish_date` DATETIME NOT NULL, `category` TEXT NOT NULL DEFAULT 'MARKET', `related_assets` JSON DEFAULT '[]', `sentiment` VARCHAR(50), `impact_level` VARCHAR(50), `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `risk_alerts` (`alert_id` UUID NOT NULL PRIMARY KEY, `limit_id` UUID NOT NULL REFERENCES `risk_limits` (`limit_id`) ON DELETE CASCADE ON UPDATE CASCADE, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `alert_type` TEXT NOT NULL, `severity` TEXT NOT NULL DEFAULT 'MEDIUM', `current_value` DECIMAL(20,6) NOT NULL, `limit_value` DECIMAL(20,6) NOT NULL, `breach_percentage` DECIMAL(10,4) NOT NULL, `currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `alert_date` DATETIME NOT NULL, `status` TEXT NOT NULL DEFAULT 'ACTIVE', `acknowledged_by` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `acknowledged_date` DATETIME, `resolved_by` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `resolved_date` DATETIME, `notification_channels` JSON, `description` TEXT, `metadata` JSON, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `users` (`user_id` UUID NOT NULL PRIMARY KEY, `username` VARCHAR(100) NOT NULL UNIQUE, `email` VARCHAR(150) NOT NULL UNIQUE, `password_hash` VARCHAR(255) NOT NULL, `first_name` VARCHAR(100), `last_name` VARCHAR(100), `registration_date` DATETIME, `last_login_date` DATETIME, `user_type` TEXT NOT NULL DEFAULT 'NOVICE', `profile_picture` VARCHAR(255), `phone` VARCHAR(20), `date_of_birth` DATE, `address` VARCHAR(255), `city` VARCHAR(100), `country` VARCHAR(100), `postal_code` VARCHAR(20), `timezone` VARCHAR(50) DEFAULT 'UTC', `language` VARCHAR(10) DEFAULT 'fr', `currency` VARCHAR(3) DEFAULT 'EUR', `notes` TEXT, `is_active` TINYINT(1) NOT NULL DEFAULT 1, `is_locked` TINYINT(1) NOT NULL DEFAULT 0, `login_attempts` INTEGER NOT NULL DEFAULT 0, `email_verified` TINYINT(1) NOT NULL DEFAULT 0, `two_factor_enabled` TINYINT(1) NOT NULL DEFAULT 0, `two_factor_secret` VARCHAR(255), `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `trading_scenarios` (`scenario_id` UUID NOT NULL PRIMARY KEY, `scenario_name` VARCHAR(200) NOT NULL, `description` TEXT, `scenario_type` TEXT NOT NULL, `start_date` DATETIME, `end_date` DATETIME, `market_conditions` JSON DEFAULT '{}', `difficulty` VARCHAR(50), `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

CREATE TABLE `cashflow_projections` (`cashflow_projection_id` UUID NOT NULL PRIMARY KEY, `portfolio_id` UUID NOT NULL REFERENCES `portfolios` (`portfolio_id`) ON DELETE CASCADE ON UPDATE CASCADE, `projection_date` DATETIME NOT NULL, `frequency` TEXT NOT NULL DEFAULT 'MONTHLY', `horizon_years` INTEGER NOT NULL DEFAULT 5, `cashflows` JSON NOT NULL, `total_assets` DECIMAL(20,2) NOT NULL DEFAULT 0, `total_liabilities` DECIMAL(20,2) NOT NULL DEFAULT 0, `net_cashflow` DECIMAL(20,2) NOT NULL DEFAULT 0, `currency` VARCHAR(3) NOT NULL DEFAULT 'EUR', `status` TEXT NOT NULL DEFAULT 'DRAFT', `created_by` UUID REFERENCES `users` (`user_id`) ON DELETE SET NULL ON UPDATE CASCADE, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL);

INSERT INTO users_backup (user_id, username, email, password_hash, first_name, last_name, registration_date, last_login_date, user_type, profile_picture, phone, date_of_birth, address, city, country, postal_code, timezone, language, currency, notes, is_active, is_locked, login_attempts, email_verified, two_factor_enabled, two_factor_secret, created_at, updated_at) VALUES
('ae4e399e-d1d2-4384-8c46-b12ba80f1f77', 'Fakhfakh', 'mohamedilyes.fakhfakh@esprit.tn', '$2b$10$WyK8Ra7m5F5bFXNfy8OLCe4w1.9uUhLEAsV8BJzkjDxy1nZGEODrK', 'Mohamed Elyes', 'Fakhfakh', '2025-11-30 15:31:54.970 +00:00', NULL, 'novice', NULL, '94673221', '2002-06-14', 'zg', 'e', 'tunisie', 'e', 'UTC', 'fr', 'TND', NULL, 1, 0, 0, 0, 0, NULL, '2025-11-30 15:31:54.976 +00:00', '2025-11-30 15:31:54.976 +00:00'),
('d9804bb1-bf8d-405e-a227-127deda8f9e8', 'dd', 'ilyes@gmail.com', '$2b$10$Ro10N3g/4id058i2AzYKTOF6HvEC3fDVqLHBev6E90nLER4Cj.cz.', 'Mohamed Elyes', 'Fakhfakh', '2025-11-30 21:01:13.673 +00:00', NULL, 'novice', NULL, '94673221', '5555-05-05', 'zg', 'e', 'Tunisie', 'e', 'UTC', 'fr', 'TND', NULL, 1, 0, 0, 0, 0, NULL, '2025-11-30 21:01:13.682 +00:00', '2025-11-30 21:01:13.682 +00:00');

INSERT INTO roles (role_id, role_name, permissions, created_at, updated_at) VALUES
('d3365445-1ffd-4b81-bca5-6524282e3542', 'USER', '[]', '2025-11-30 21:48:40.323 +00:00', '2025-11-30 21:48:40.323 +00:00'),
('9518e5a0-7b88-4c91-b3e8-8136ca3697b6', 'TRADER', '["PLACE_ORDERS","VIEW_MARKET_DATA"]', '2025-11-30 21:48:40.340 +00:00', '2025-11-30 21:48:40.340 +00:00'),
('4dbf8c7d-453f-4cbf-bab2-68e56d283bf6', 'MODERATOR', '["VIEW_USERS"]', '2025-11-30 21:48:40.352 +00:00', '2025-11-30 21:48:40.352 +00:00'),
('58ae6bf8-3091-4f77-9570-929eb6dbf5d6', 'ADMIN', '["VIEW_USERS","MANAGE_USERS","MANAGE_ROLES","VIEW_AUDIT_LOGS"]', '2025-11-30 21:48:40.361 +00:00', '2025-11-30 21:48:40.361 +00:00');

INSERT INTO sessions (session_id, user_id, login_time, last_activity, expires_at, user_agent, ip_address, is_active, created_at, updated_at) VALUES
('aa3a14ce-3799-463d-a5b3-86d74e2214ea', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 21:01:23.920 +00:00', '2025-11-30 21:01:23.920 +00:00', '2025-11-30 21:44:01.128 +00:00', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0', '::1', 0, '2025-11-30 21:01:23.920 +00:00', '2025-11-30 21:44:01.129 +00:00'),
('71075b2b-1868-4192-9939-5b933d5a5038', '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-12-01 01:12:09.174 +00:00', '2025-12-01 01:12:09.174 +00:00', '2025-12-08 01:12:09.174 +00:00', NULL, '::1', 1, '2025-12-01 01:12:09.175 +00:00', '2025-12-01 01:12:09.175 +00:00'),
('71d0cda2-46a5-4290-bc1a-ad7f4dbaf9d4', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-12-01 01:13:23.170 +00:00', '2025-12-01 01:13:23.170 +00:00', '2025-12-08 01:13:23.170 +00:00', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36 Edg/142.0.0.0', '::1', 1, '2025-12-01 01:13:23.170 +00:00', '2025-12-01 01:13:23.170 +00:00');

INSERT INTO portfolios (portfolio_id, user_id, portfolio_name, base_currency, creation_date, last_update_date, is_active, created_at, updated_at, initial_balance, current_balance, total_value, profit_loss, profit_loss_percentage) VALUES
('7298b1fa-60f2-46d0-9b43-6e69ddabc458', '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', 'Portefeuille Principal', 'EUR', '2025-11-30 21:48:48.538 +00:00', '2025-11-30 22:32:06.444 +00:00', 1, '2025-11-30 21:48:48.539 +00:00', '2025-11-30 22:32:06.444 +00:00', 100000, 100000, 275062.5, 175062.5, 175.0625),
('4b6c8437-dea0-4abe-b1a4-a495febc9689', '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', 'Portefeuille Actions', 'USD', '2025-11-30 21:48:48.556 +00:00', '2025-11-30 22:32:06.453 +00:00', 1, '2025-11-30 21:48:48.556 +00:00', '2025-11-30 22:32:06.453 +00:00', 100000, 100000, 219247.5, 119247.5, 119.2475),
('05af70d5-6c01-4eb0-9c33-c77c1a1f7a57', '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', 'Portefeuille Obligations', 'EUR', '2025-11-30 21:48:48.567 +00:00', '2025-11-30 22:32:06.460 +00:00', 1, '2025-11-30 21:48:48.567 +00:00', '2025-11-30 22:32:06.460 +00:00', 100000, 100000, 100000, 0, 0),
('49a88164-4ced-4d26-becd-9922d388f12f', '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', 'Portefeuille Diversifi√©', 'EUR', '2025-11-30 21:48:48.579 +00:00', '2025-11-30 22:32:06.468 +00:00', 1, '2025-11-30 21:48:48.579 +00:00', '2025-11-30 22:32:06.468 +00:00', 100000, 100000, 100000, 0, 0),
('9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', 'stocks', 'EUR', '2025-11-30 22:14:01.214 +00:00', '2025-11-30 22:51:11.890 +00:00', 1, '2025-11-30 22:14:01.214 +00:00', '2025-11-30 22:51:11.890 +00:00', 100000, 100000, 105112, 5112, 5.112),
('02eb7163-8c41-4988-8a67-12b03d9d4dc2', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', 'diversifications', 'EUR', '2025-12-01 00:56:50.911 +00:00', NULL, 1, '2025-12-01 00:56:50.912 +00:00', '2025-12-01 00:56:50.912 +00:00', 100000, 100000, 100000, 0, 0);

INSERT INTO user_roles (user_role_id, user_id, role_id, created_at, updated_at) VALUES
('d4237bfb-d775-4bae-9d88-305cce587f45', '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '58ae6bf8-3091-4f77-9570-929eb6dbf5d6', '2025-11-30 21:48:40.477 +00:00', '2025-11-30 21:48:40.477 +00:00');

INSERT INTO positions (position_id, portfolio_id, asset_id, asset_symbol, asset_type, quantity, average_price, current_price, market_value, unrealized_pl, unrealized_pl_percentage, open_date, last_update_date, created_at, updated_at, is_archived) VALUES
('04c0b507-e2f3-4442-bb25-7ebf73e373c5', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, 'AAPL', 'STOCK', 100, 150, 180, 18000, 3000, 20, '2025-11-30 21:48:53.380 +00:00', NULL, '2025-11-30 21:48:53.381 +00:00', '2025-11-30 21:48:53.381 +00:00', 0),
('143b5b47-c83e-48ab-b2df-0332025ed94e', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, 'MSFT', 'STOCK', 50, 300, 350, 17500, 2500, 16.67, '2025-11-30 21:48:53.398 +00:00', NULL, '2025-11-30 21:48:53.398 +00:00', '2025-11-30 21:48:53.398 +00:00', 0),
('ac6a4113-194f-40ba-b373-b11744669112', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, 'EUR_BOND_2025', 'BOND', 1000, 98, 99, 99000, 1000, 1.02, '2025-11-30 21:48:53.411 +00:00', NULL, '2025-11-30 21:48:53.411 +00:00', '2025-11-30 21:48:53.411 +00:00', 0),
('d3260e74-0a2a-4ac6-a42e-7dd673ece6c3', '4b6c8437-dea0-4abe-b1a4-a495febc9689', NULL, 'GOOGL', 'STOCK', 25, 2500, 2800, 70000, 7500, 12, '2025-11-30 21:48:53.422 +00:00', NULL, '2025-11-30 21:48:53.422 +00:00', '2025-11-30 21:48:53.422 +00:00', 0),
('0241d70e-b161-4550-bb38-a6ab3f890d46', '4b6c8437-dea0-4abe-b1a4-a495febc9689', NULL, 'TSLA', 'STOCK', 30, 800, 900, 27000, 3000, 12.5, '2025-11-30 21:48:53.432 +00:00', NULL, '2025-11-30 21:48:53.433 +00:00', '2025-11-30 21:48:53.433 +00:00', 0),
('534608b2-93d2-434d-88ba-80136adbac3b', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, 'SAP.DE', 'STOCK', 100, 150.5, 165.75, 16575, 1525, 10.132890365448505, '2025-11-30 22:08:43.127 +00:00', NULL, '2025-11-30 22:08:43.128 +00:00', '2025-11-30 22:08:43.185 +00:00', 0),
('bb707f01-76d8-4eeb-a4db-0fd6f4c114fe', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, 'ASML.AS', 'STOCK', 25, 650, 720.5, 18012.5, 1762.5, 10.846153846153845, '2025-11-30 22:08:43.145 +00:00', NULL, '2025-11-30 22:08:43.145 +00:00', '2025-11-30 22:08:43.192 +00:00', 0),
('fdf04ae7-5112-477b-b295-445ac2cdee57', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, 'SAN.PA', 'STOCK', 500, 12.8, 11.95, 5975, -425.0000000000007, -6.640625000000011, '2025-11-30 22:08:43.157 +00:00', NULL, '2025-11-30 22:08:43.157 +00:00', '2025-11-30 22:08:43.199 +00:00', 0),
('71f75784-ceac-4eb0-bd76-b6dd696d9687', '4b6c8437-dea0-4abe-b1a4-a495febc9689', NULL, 'AAPL', 'STOCK', 50, 180.25, 195.8, 9790, 777.5000000000006, 8.626907073509022, '2025-11-30 22:08:43.167 +00:00', NULL, '2025-11-30 22:08:43.167 +00:00', '2025-11-30 22:08:43.205 +00:00', 0),
('6bb30828-286e-4ab0-8b05-0fb921367ca5', '4b6c8437-dea0-4abe-b1a4-a495febc9689', NULL, 'MSFT', 'STOCK', 30, 380.5, 415.25, 12457.5, 1042.5, 9.132720105124836, '2025-11-30 22:08:43.178 +00:00', NULL, '2025-11-30 22:08:43.178 +00:00', '2025-11-30 22:08:43.212 +00:00', 0),
('baa6b1e0-0ad1-4e1f-a97f-a9f43ad14076', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', NULL, 'TEST', 'STOCK', 100, 50, 50, 5000, 0, 0, '2025-11-30 22:46:48.187 +00:00', NULL, '2025-11-30 22:46:48.187 +00:00', '2025-11-30 22:46:48.187 +00:00', 0),
('7efa9786-a913-4f0f-b42b-0f94623f5442', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', NULL, 'TSLA', 'STOCK', 1, 1, 1, 1, 0, 0, '2025-11-30 22:47:50.093 +00:00', NULL, '2025-11-30 22:47:50.093 +00:00', '2025-11-30 22:47:50.093 +00:00', 0),
('87a341f1-d057-48aa-a49a-dda8aef8fdf9', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', NULL, 'EUR', 'STOCK', 1, 111, 111, 111, 0, 0, '2025-11-30 22:51:11.866 +00:00', NULL, '2025-11-30 22:51:11.867 +00:00', '2025-11-30 22:51:11.867 +00:00', 0);

INSERT INTO transactions (transaction_id, portfolio_id, asset_id, transaction_type, quantity, price, total_amount, commission, timestamp, created_at, updated_at) VALUES
('e4c47e1d-45e9-4fb1-8cdf-f6938bd9b9e8', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', NULL, 'BUY', 100, 50, 0, 0, '2025-11-30 22:46:48.202 +00:00', '2025-11-30 22:46:48.202 +00:00', '2025-11-30 22:46:48.202 +00:00'),
('09fcd9b3-48f5-4f9e-941b-ab7f69692887', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', NULL, 'BUY', 1, 1, 0, 0, '2025-11-30 22:47:50.099 +00:00', '2025-11-30 22:47:50.100 +00:00', '2025-11-30 22:47:50.100 +00:00'),
('352652e8-fe50-400f-9927-2eae9eb5bab6', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', NULL, 'BUY', 1, 111, 0, 0, '2025-11-30 22:51:11.876 +00:00', '2025-11-30 22:51:11.876 +00:00', '2025-11-30 22:51:11.876 +00:00');

INSERT INTO alm_positions (alm_position_id, portfolio_id, position_id, instrument_type, asset_liability, nominal_amount, currency, maturity_date, coupon_rate, frequency, cashflows, market_value, duration, convexity, dv01, yield_to_maturity, modified_duration, is_active, created_by, created_at, updated_at) VALUES
('94175071-0e00-4a7d-9917-6efb1b88dd75', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '04c0b507-e2f3-4442-bb25-7ebf73e373c5', 'BOND', 'ASSET', 100000, 'EUR', '2030-11-30 21:54:17.915 +00:00', 2.5, 'ANNUAL', '[{"date":"2026-11-30T21:54:17.916Z","amount":2500,"type":"COUPON"},{"date":"2027-11-30T21:54:17.916Z","amount":2500,"type":"COUPON"},{"date":"2028-11-30T21:54:17.916Z","amount":2500,"type":"COUPON"},{"date":"2029-11-30T21:54:17.916Z","amount":2500,"type":"COUPON"},{"date":"2030-11-30T21:54:17.916Z","amount":2500,"type":"COUPON"},{"date":"2030-11-30T21:54:17.915Z","amount":100000,"type":"PRINCIPAL"}]', 97500, 4.776875810830103, 28.19081802740844, 45.305971941238816, 2.8, 4.646766352947571, 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 21:54:17.924 +00:00', '2025-11-30 21:54:47.439 +00:00'),
('c710936f-d298-423c-989f-778d5aae34c1', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '143b5b47-c83e-48ab-b2df-0332025ed94e', 'BOND', 'ASSET', 75000, 'EUR', '2028-11-30 21:54:17.916 +00:00', 3, 'ANNUAL', '[{"date":"2026-11-30T21:54:17.916Z","amount":2250,"type":"COUPON"},{"date":"2027-11-30T21:54:17.916Z","amount":2250,"type":"COUPON"},{"date":"2028-11-30T21:54:17.916Z","amount":2250,"type":"COUPON"},{"date":"2028-11-30T21:54:17.916Z","amount":75000,"type":"PRINCIPAL"}]', 75250, 2.91796810255979, 11.554392117189, 21.297487848460158, 3.1, 2.8302309433169643, 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 21:54:17.946 +00:00', '2025-11-30 21:54:47.448 +00:00'),
('cfcfee57-5700-4c47-9e97-875d6e6cafd6', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '04c0b507-e2f3-4442-bb25-7ebf73e373c5', 'LOAN', 'LIABILITY', 200000, 'EUR', '2027-11-30 21:54:17.917 +00:00', 4.5, 'ANNUAL', '[{"date":"2026-11-30T21:54:17.917Z","amount":-50000,"type":"PAYMENT"},{"date":"2027-11-30T21:54:17.917Z","amount":-50000,"type":"PAYMENT"}]', 195000, 0, 0, 0, 4.5, 0, 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 21:54:17.958 +00:00', '2025-11-30 21:54:47.453 +00:00'),
('07393ffd-313b-43b9-afa2-f73fb1150027', '4b6c8437-dea0-4abe-b1a4-a495febc9689', 'd3260e74-0a2a-4ac6-a42e-7dd673ece6c3', 'BOND', 'ASSET', 100000, 'EUR', '2030-11-30 21:54:17.917 +00:00', 2.5, 'ANNUAL', '[{"date":"2026-11-30T21:54:17.917Z","amount":2500,"type":"COUPON"},{"date":"2027-11-30T21:54:17.917Z","amount":2500,"type":"COUPON"},{"date":"2028-11-30T21:54:17.917Z","amount":2500,"type":"COUPON"},{"date":"2029-11-30T21:54:17.917Z","amount":2500,"type":"COUPON"},{"date":"2030-11-30T21:54:17.917Z","amount":2500,"type":"COUPON"},{"date":"2030-11-30T21:54:17.917Z","amount":100000,"type":"PRINCIPAL"}]', 97500, NULL, NULL, NULL, 2.8, NULL, 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 21:54:17.971 +00:00', '2025-11-30 21:54:17.971 +00:00'),
('ed89ac79-b468-4df3-abee-5f51cad32fb0', '4b6c8437-dea0-4abe-b1a4-a495febc9689', '0241d70e-b161-4550-bb38-a6ab3f890d46', 'BOND', 'ASSET', 75000, 'EUR', '2028-11-30 21:54:17.917 +00:00', 3, 'ANNUAL', '[{"date":"2026-11-30T21:54:17.917Z","amount":2250,"type":"COUPON"},{"date":"2027-11-30T21:54:17.917Z","amount":2250,"type":"COUPON"},{"date":"2028-11-30T21:54:17.917Z","amount":2250,"type":"COUPON"},{"date":"2028-11-30T21:54:17.917Z","amount":75000,"type":"PRINCIPAL"}]', 75250, NULL, NULL, NULL, 3.1, NULL, 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 21:54:17.982 +00:00', '2025-11-30 21:54:17.982 +00:00'),
('40d5de9f-d95d-46b3-8b5c-fdb370c98cf2', '4b6c8437-dea0-4abe-b1a4-a495febc9689', 'd3260e74-0a2a-4ac6-a42e-7dd673ece6c3', 'LOAN', 'LIABILITY', 200000, 'EUR', '2027-11-30 21:54:17.917 +00:00', 4.5, 'ANNUAL', '[{"date":"2026-11-30T21:54:17.917Z","amount":-50000,"type":"PAYMENT"},{"date":"2027-11-30T21:54:17.917Z","amount":-50000,"type":"PAYMENT"}]', 195000, NULL, NULL, NULL, 4.5, NULL, 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 21:54:17.994 +00:00', '2025-11-30 21:54:17.994 +00:00');

INSERT INTO interest_rate_sensitivities (sensitivity_id, portfolio_id, calculation_date, scenario_type, shock_bps, assets_pv_change, liabilities_pv_change, net_pv_change, assets_duration, liabilities_duration, duration_gap, currency, yield_curve_id, status, created_by, created_at, updated_at) VALUES
('d532ac30-57f9-4460-abaa-7b1aab9a50c5', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 22:54:42.817 +00:00', 'PARALLEL', 100, 0, 0, 0, 0, 0, 0, 'EUR', '9e51faad-18ca-41dc-ac55-4703481b1343', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 22:54:42.818 +00:00', '2025-11-30 22:54:42.818 +00:00'),
('9f4852da-c393-443e-b5af-bf86f04583d6', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 22:54:42.825 +00:00', 'PARALLEL', -100, 0, 0, 0, 0, 0, 0, 'EUR', '9e51faad-18ca-41dc-ac55-4703481b1343', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 22:54:42.825 +00:00', '2025-11-30 22:54:42.825 +00:00'),
('41a0b15a-b6c8-45e0-8a4a-d7735390517f', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:11:49.646 +00:00', 'PARALLEL', 100, -4666.312300447753, 0, -4666.312300447753, 12923.66468021514, 0, 12923.66468021514, 'EUR', '9e51faad-18ca-41dc-ac55-4703481b1343', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:11:49.646 +00:00', '2025-11-30 23:11:49.646 +00:00'),
('502c9dc3-a937-4d5e-b8b1-95269bdfd09b', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:11:49.653 +00:00', 'PARALLEL', -100, -4644.2039433330065, 0, -4644.2039433330065, 12923.664678928491, 0, 12923.664678928491, 'EUR', '9e51faad-18ca-41dc-ac55-4703481b1343', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:11:49.653 +00:00', '2025-11-30 23:11:49.653 +00:00'),
('059f4ada-2a7d-47df-a1a7-0127fa3012b7', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:11:53.735 +00:00', 'PARALLEL', 100, -4674.162993125965, 0, -4674.162993125965, 12852.318294898358, 0, 12852.318294898358, 'USD', 'f0a66ec0-a839-440c-b703-32edafaf9f35', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:11:53.735 +00:00', '2025-11-30 23:11:53.735 +00:00'),
('7ba7a3be-47e8-423e-90ff-20b84f5d2a5c', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:11:53.746 +00:00', 'PARALLEL', -100, -4652.7246453197295, 0, -4652.7246453197295, 12852.318292963737, 0, 12852.318292963737, 'USD', 'f0a66ec0-a839-440c-b703-32edafaf9f35', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:11:53.747 +00:00', '2025-11-30 23:11:53.747 +00:00'),
('13c9c245-1f54-411a-a00c-264ee5a575d0', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:11:56.826 +00:00', 'PARALLEL', 100, -4659.124669095269, 0, -4659.124669095269, 12938.429547486892, 0, 12938.429547486892, 'GBP', 'd741fb95-ff0d-411a-9fc2-cbe403d46c53', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:11:56.826 +00:00', '2025-11-30 23:11:56.826 +00:00'),
('337c9d44-3066-43b4-8f7d-7310107a9732', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:11:56.837 +00:00', 'PARALLEL', -100, -4636.48447370928, 0, -4636.48447370928, 12938.429545890847, 0, 12938.429545890847, 'GBP', 'd741fb95-ff0d-411a-9fc2-cbe403d46c53', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:11:56.837 +00:00', '2025-11-30 23:11:56.837 +00:00'),
('bd15c4a4-571d-45b0-bbe1-786ee69ad96a', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:00.792 +00:00', 'PARALLEL', 100, -4614.435402560173, 0, -4614.435402560173, 13403.35194942011, 0, 13403.35194942011, 'EUR', 'd5778794-4bd1-4d82-9795-a6c81b37cde7', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:00.793 +00:00', '2025-11-30 23:12:00.793 +00:00'),
('e5e36ba7-c2b8-418a-9c14-dd26b0a947fb', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:00.810 +00:00', 'PARALLEL', -100, -4587.645493281132, 0, -4587.645493281132, 13403.351946505469, 0, 13403.351946505469, 'EUR', 'd5778794-4bd1-4d82-9795-a6c81b37cde7', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:00.811 +00:00', '2025-11-30 23:12:00.811 +00:00'),
('6f7b67b9-4990-48d3-aea8-6fa6bc78b421', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:04.585 +00:00', 'PARALLEL', 100, -4614.435402560173, 0, -4614.435402560173, 13403.35194942011, 0, 13403.35194942011, 'EUR', '4b4ed353-281d-4cf4-874d-a25e4b060a00', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:04.585 +00:00', '2025-11-30 23:12:04.585 +00:00'),
('bf0fcaf6-211f-4f83-bda2-069a7fd2f8e5', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:04.595 +00:00', 'PARALLEL', -100, -4587.6454932798515, 0, -4587.6454932798515, 13403.351947800866, 0, 13403.351947800866, 'EUR', '4b4ed353-281d-4cf4-874d-a25e4b060a00', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:04.595 +00:00', '2025-11-30 23:12:04.595 +00:00'),
('81f55e0d-7eab-482b-863a-ce9239bc4c54', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:09.090 +00:00', 'PARALLEL', 100, -4614.435402560173, 0, -4614.435402560173, 13403.35194942011, 0, 13403.35194942011, 'GBP', 'e7bddd91-4393-4e6a-bb4a-6c18692120a1', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:09.090 +00:00', '2025-11-30 23:12:09.090 +00:00'),
('e6e06c07-79b7-4332-90d8-2a8bf52d2079', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:09.107 +00:00', 'PARALLEL', -100, -4587.645493281132, 0, -4587.645493281132, 13403.351946505469, 0, 13403.351946505469, 'GBP', 'e7bddd91-4393-4e6a-bb4a-6c18692120a1', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:09.107 +00:00', '2025-11-30 23:12:09.107 +00:00'),
('666fd1b2-3ed4-4238-8580-0221f5ed0275', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:12.644 +00:00', 'PARALLEL', 100, -4659.124669094701, 0, -4659.124669094701, 12938.429547331127, 0, 12938.429547331127, 'GBP', 'd741fb95-ff0d-411a-9fc2-cbe403d46c53', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:12.644 +00:00', '2025-11-30 23:12:12.644 +00:00'),
('6d3fcd3e-62fd-4516-b77f-cc7cb7b29d3f', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:12.651 +00:00', 'PARALLEL', -100, -4636.484473710252, 0, -4636.484473710252, 12938.4295463721, 0, 12938.4295463721, 'GBP', 'd741fb95-ff0d-411a-9fc2-cbe403d46c53', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:12.651 +00:00', '2025-11-30 23:12:12.651 +00:00'),
('ce055807-a9e8-4fd9-9cfd-a36d2a1468c6', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:18.056 +00:00', 'PARALLEL', 100, -4659.342983417232, 0, -4659.342983417232, 12993.933944537095, 0, 12993.933944537095, 'EUR', '34032803-8e88-415d-9d34-25a6f3d7d3a6', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:18.057 +00:00', '2025-11-30 23:12:18.057 +00:00'),
('fe66ecc7-d07d-45d3-9f68-ad7517a619c5', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:18.075 +00:00', 'PARALLEL', -100, -4636.61945632049, 0, -4636.61945632049, 12993.93394146845, 0, 12993.93394146845, 'EUR', '34032803-8e88-415d-9d34-25a6f3d7d3a6', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:18.075 +00:00', '2025-11-30 23:12:18.075 +00:00'),
('84803fe4-1407-4be7-9ebb-3cae83ea9331', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:25.124 +00:00', 'PARALLEL', 100, -4659.342983417232, 0, -4659.342983417232, 12993.933944537095, 0, 12993.933944537095, 'EUR', '34032803-8e88-415d-9d34-25a6f3d7d3a6', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:25.125 +00:00', '2025-11-30 23:12:25.125 +00:00'),
('baf483cd-70d2-468c-ae87-5835d8e4bf0c', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:12:25.138 +00:00', 'PARALLEL', -100, -4636.619456322692, 0, -4636.619456322692, 12993.933942275986, 0, 12993.933942275986, 'EUR', '34032803-8e88-415d-9d34-25a6f3d7d3a6', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:12:25.138 +00:00', '2025-11-30 23:12:25.138 +00:00');

INSERT INTO liquidity_gaps (liquidity_gap_id, portfolio_id, calculation_date, bucket_0_1m, bucket_1_3m, bucket_3_12m, bucket_1_3y, bucket_3_5y, bucket_5y_plus, total_gap, currency, status, created_by, created_at, updated_at) VALUES
('faa47e11-3500-48dd-b68c-658b85c64a56', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 22:54:38.193 +00:00', 0, 0, 0, 0, 0, 0, 0, 'EUR', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 22:54:38.193 +00:00', '2025-11-30 22:54:38.193 +00:00'),
('fa435139-913f-4d9b-a653-15c81d87a36e', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:11:43.266 +00:00', 0, 0, 0, 0, 0, 5112, 5112, 'EUR', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:11:43.267 +00:00', '2025-11-30 23:11:43.267 +00:00'),
('ea0ef023-20b4-451c-bda0-3f7695af84d2', '9ca0d1e0-4a38-405b-adcb-a18f7cb40c87', '2025-11-30 23:16:05.091 +00:00', 0, 0, 0, 0, 0, 5112, 5112, 'EUR', 'DRAFT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 23:16:05.092 +00:00', '2025-11-30 23:16:05.092 +00:00');

INSERT INTO yield_curves (yield_curve_id, curve_name, currency, curve_type, valuation_date, maturity_points, interpolation_method, is_active, created_by, created_at, updated_at) VALUES
('4424a59a-9c48-40ce-a7ea-d06a8fa0cc4a', 'Test Curve Direct', 'EUR', 'GOVERNMENT', '2025-11-30 21:24:14.779 +00:00', '[{"maturity":1,"rate":0.04}]', 'LINEAR', 1, NULL, '2025-11-30 21:24:14.780 +00:00', '2025-11-30 21:24:14.780 +00:00'),
('4b4ed353-281d-4cf4-874d-a25e4b060a00', 'Test Curve', 'EUR', 'GOVERNMENT', '2025-11-30 21:24:50.246 +00:00', '[{"maturity":1,"rate":0.04}]', 'LINEAR', 1, NULL, '2025-11-30 21:24:50.247 +00:00', '2025-11-30 21:24:50.247 +00:00'),
('d5778794-4bd1-4d82-9795-a6c81b37cde7', 'd', 'EUR', 'GOVERNMENT', '2025-11-30 21:26:50.197 +00:00', '[{"maturity":1,"rate":0.04}]', 'LINEAR', 1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 21:26:50.198 +00:00', '2025-11-30 21:26:50.198 +00:00'),
('e7bddd91-4393-4e6a-bb4a-6c18692120a1', 'curve 1', 'GBP', 'CORPORATE', '2025-11-30 21:27:53.045 +00:00', '[{"maturity":1,"rate":0.04}]', 'LINEAR', 1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 21:27:53.045 +00:00', '2025-11-30 21:27:53.045 +00:00'),
('d741fb95-ff0d-411a-9fc2-cbe403d46c53', 'xx', 'GBP', 'CORPORATE', '2025-11-30 21:43:38.034 +00:00', '[{"maturity":1,"rate":0.04},{"maturity":1,"rate":4.04}]', 'LINEAR', 1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-11-30 21:43:38.034 +00:00', '2025-11-30 21:43:38.034 +00:00'),
('34032803-8e88-415d-9d34-25a6f3d7d3a6', 'EUR Government Curve 2025', 'EUR', 'GOVERNMENT', '2025-11-30 22:03:04.477 +00:00', '[{"maturity":0.25,"rate":3.45},{"maturity":0.5,"rate":3.52},{"maturity":1,"rate":3.68},{"maturity":2,"rate":3.75},{"maturity":3,"rate":3.82},{"maturity":5,"rate":3.95},{"maturity":7,"rate":4.08},{"maturity":10,"rate":4.15},{"maturity":15,"rate":4.25},{"maturity":20,"rate":4.3},{"maturity":30,"rate":4.35}]', 'LINEAR', 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 22:03:04.478 +00:00', '2025-11-30 22:03:04.478 +00:00'),
('f0a66ec0-a839-440c-b703-32edafaf9f35', 'USD Treasury Curve 2025', 'USD', 'GOVERNMENT', '2025-11-30 22:03:04.500 +00:00', '[{"maturity":0.25,"rate":4.85},{"maturity":0.5,"rate":4.92},{"maturity":1,"rate":5.08},{"maturity":2,"rate":5.15},{"maturity":3,"rate":5.22},{"maturity":5,"rate":5.35},{"maturity":7,"rate":5.48},{"maturity":10,"rate":5.55},{"maturity":15,"rate":5.65},{"maturity":20,"rate":5.7},{"maturity":30,"rate":5.75}]', 'LINEAR', 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 22:03:04.500 +00:00', '2025-11-30 22:03:04.500 +00:00'),
('9e51faad-18ca-41dc-ac55-4703481b1343', 'EUR Corporate AAA Curve 2025', 'EUR', 'CORPORATE', '2025-11-30 22:03:04.512 +00:00', '[{"maturity":1,"rate":4.25},{"maturity":2,"rate":4.35},{"maturity":3,"rate":4.45},{"maturity":5,"rate":4.65},{"maturity":7,"rate":4.85},{"maturity":10,"rate":5.05},{"maturity":15,"rate":5.25},{"maturity":20,"rate":5.35},{"maturity":30,"rate":5.45}]', 'LINEAR', 1, '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '2025-11-30 22:03:04.512 +00:00', '2025-11-30 22:03:04.512 +00:00');

INSERT INTO risk_metrics (metric_id, portfolio_id, calculation_date, metric_type, value, currency, confidence_level, time_horizon_days, instrument_type, calculation_method, status, created_by, metadata, created_at, updated_at) VALUES
('fb0bc954-a2b0-4319-b3a7-b45c97e9b8bb', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:44:13.034 +00:00', 'VAR', 15420.5, 'EUR', 0.95, 1, 'ALL', 'PARAMETRIC', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"volatility":0.15,"expected_return":0.08,"calculation_date":"2025-12-01T00:44:13.034Z"}', '2025-12-01 00:44:13.036 +00:00', '2025-12-01 00:44:13.036 +00:00'),
('8bea4a28-3d1b-4047-ba57-fcdf18e4452d', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-11-30 00:44:13.035 +00:00', 'VAR', 16850.75, 'EUR', 0.99, 1, 'ALL', 'PARAMETRIC', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"volatility":0.16,"expected_return":0.07}', '2025-12-01 00:44:13.046 +00:00', '2025-12-01 00:44:13.046 +00:00'),
('912257c8-366e-4168-80ee-996c06849db0', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:44:13.035 +00:00', 'CVAR', 25680.9, 'EUR', 0.95, 1, 'ALL', 'HISTORICAL', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"tail_risk":0.12,"worst_case_loss":25680.9}', '2025-12-01 00:44:13.052 +00:00', '2025-12-01 00:44:13.052 +00:00'),
('a3a973fb-10f7-4dca-a31a-69a391f9ff9e', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:44:13.035 +00:00', 'SHARPE_RATIO', 1.85, 'EUR', NULL, 252, 'ALL', 'HISTORICAL', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"expected_return":0.12,"risk_free_rate":0.02,"volatility":0.18}', '2025-12-01 00:44:13.058 +00:00', '2025-12-01 00:44:13.058 +00:00'),
('6e164df0-a548-47d2-b3c7-0e456d8e9ad6', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:45:53.213 +00:00', 'VAR', 0.008978966308792077, 'EUR', 0.95, 1, 'ALL', 'PARAMETRIC', 'CALCULATED', '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', NULL, '2025-12-01 00:45:53.214 +00:00', '2025-12-01 00:45:53.214 +00:00'),
('b4740ca4-49b8-41db-bf31-aed702cea6a5', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:51:36.075 +00:00', 'STRESS_LOSS', 0, 'EUR', 0.95, 10, 'ALL', 'STRESS_TEST', 'CALCULATED', '1f0c9976-56df-45bd-97c2-8d5cdf1cfb56', '{"scenario_id":"9x0y1z2a-3b4c5d6e-7f8g9h0i-1j2k3l4m5n6o","scenario_name":"Combined Stress Scenario","market_shocks":"{\"equity\":-0.3,\"rates\":0.03,\"fx\":{\"EUR\":-0.2,\"GBP\":-0.15,\"USD\":-0.1},\"credit_spread\":0.015}"}', '2025-12-01 00:51:36.076 +00:00', '2025-12-01 00:51:36.076 +00:00'),
('6e7ad2b7-5433-4712-9d2b-562a84a85c12', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:52:50.843 +00:00', 'STRESS_LOSS', 0, 'EUR', 0.95, 10, 'ALL', 'STRESS_TEST', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"scenario_id":"9x0y1z2a-3b4c5d6e-7f8g9h0i-1j2k3l4m5n6o","scenario_name":"Combined Stress Scenario","market_shocks":"{\"equity\":-0.3,\"rates\":0.03,\"fx\":{\"EUR\":-0.2,\"GBP\":-0.15,\"USD\":-0.1},\"credit_spread\":0.015}"}', '2025-12-01 00:52:50.843 +00:00', '2025-12-01 00:52:50.843 +00:00'),
('e5f46a82-7527-413c-871c-78c15120afe3', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:53:48.750 +00:00', 'STRESS_LOSS', 0, 'EUR', 0.95, 5, 'ALL', 'STRESS_TEST', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"scenario_id":"2f3g4h5i-6j7k8l9m-0n1o2p3q-4r5s6t7u8v9w","scenario_name":"Credit Spread Widening","market_shocks":"{\"equity\":-0.03,\"rates\":0.005,\"credit_spread\":0.01,\"fx\":{\"USD\":-0.02}}"}', '2025-12-01 00:53:48.750 +00:00', '2025-12-01 00:53:48.750 +00:00'),
('dc2164fd-0cf9-4ade-961c-30919d7fe552', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:53:51.699 +00:00', 'STRESS_LOSS', 0, 'EUR', 0.95, 5, 'ALL', 'STRESS_TEST', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"scenario_id":"2f3g4h5i-6j7k8l9m-0n1o2p3q-4r5s6t7u8v9w","scenario_name":"Credit Spread Widening","market_shocks":"{\"equity\":-0.03,\"rates\":0.005,\"credit_spread\":0.01,\"fx\":{\"USD\":-0.02}}"}', '2025-12-01 00:53:51.700 +00:00', '2025-12-01 00:53:51.700 +00:00'),
('17f151bc-3d5e-46ea-9d66-c5f83c358791', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:53:57.444 +00:00', 'STRESS_LOSS', 0, 'EUR', 0.95, 1, 'ALL', 'STRESS_TEST', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"scenario_id":"4n5o6p7q-8r9s0t1u-2v3w4x5y-6z7a8b9c0d1e","scenario_name":"FX Crisis - EUR/USD","market_shocks":"{\"equity\":-0.08,\"rates\":0.005,\"fx\":{\"EUR\":-0.15,\"GBP\":-0.1}}"}', '2025-12-01 00:53:57.444 +00:00', '2025-12-01 00:53:57.444 +00:00'),
('a3d70bd6-92cc-49d0-b93c-65bfb8221fb3', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:54:00.973 +00:00', 'STRESS_LOSS', 0, 'EUR', 0.95, 1, 'ALL', 'STRESS_TEST', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"scenario_id":"7f8e9d1a-2b3c-4d5e-6f7g-8h9i0j1k2l3m","scenario_name":"Interest Rate Shock +2%","market_shocks":"{\"equity\":-0.05,\"rates\":0.02,\"fx\":{\"EUR\":0.02,\"GBP\":0.015}}"}', '2025-12-01 00:54:00.973 +00:00', '2025-12-01 00:54:00.973 +00:00'),
('d0e60309-69d0-4c2f-8cc1-de1dd89e7547', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 00:54:05.751 +00:00', 'STRESS_LOSS', 0, 'EUR', 0.95, 1, 'ALL', 'STRESS_TEST', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"scenario_id":"538de554-2fec-4d38-a500-497429dfeae2","scenario_name":"Equity Market Crash","market_shocks":"{\"equity\":-0.2,\"rates\":0.01,\"fx\":{\"USD\":-0.05,\"GBP\":-0.03}}"}', '2025-12-01 00:54:05.751 +00:00', '2025-12-01 00:54:05.751 +00:00'),
('0a39d4b0-3144-4880-9dcf-13b722d3de28', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', '2025-12-01 01:13:37.412 +00:00', 'STRESS_LOSS', 0, 'EUR', 0.95, 10, 'ALL', 'STRESS_TEST', 'CALCULATED', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '{"scenario_id":"9x0y1z2a-3b4c5d6e-7f8g9h0i-1j2k3l4m5n6o","scenario_name":"Combined Stress Scenario","market_shocks":"{\"equity\":-0.3,\"rates\":0.03,\"fx\":{\"EUR\":-0.2,\"GBP\":-0.15,\"USD\":-0.1},\"credit_spread\":0.015}"}', '2025-12-01 01:13:37.412 +00:00', '2025-12-01 01:13:37.412 +00:00');

INSERT INTO risk_limits (limit_id, portfolio_id, trader_id, desk_id, instrument_type, limit_type, limit_value, currency, time_horizon, confidence_level, is_active, breach_action, created_by, approved_by, approval_date, created_at, updated_at) VALUES
('e8438928-8ff5-4074-afd1-242efd8e1024', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, NULL, 'ALL', 'EXPOSURE', 1000000, 'EUR', 'DAILY', 0.95, 1, 'ALERT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', NULL, NULL, '2025-12-01 00:20:32.710 +00:00', '2025-12-01 00:20:32.710 +00:00'),
('04aacb53-8cb4-4167-a7f6-062dd2c5bfb5', NULL, NULL, NULL, 'ALL', 'EXPOSURE', 5000000, 'EUR', 'DAILY', 0.95, 1, 'RESTRICT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', NULL, NULL, '2025-12-01 00:20:32.721 +00:00', '2025-12-01 00:20:32.721 +00:00'),
('fd59dbf3-45af-4ffe-8994-7ea90fa4a95d', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, NULL, 'EQUITY', 'VAR', 15000, 'EUR', 'DAILY', 0.95, 1, 'ALERT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-12-01 00:44:13.084 +00:00', '2025-12-01 00:44:13.085 +00:00', '2025-12-01 00:44:13.085 +00:00'),
('59ff590b-de3d-4ae0-aed0-cc48a96a748e', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, NULL, 'BOND', 'DV01', 5000, 'EUR', 'DAILY', NULL, 1, 'ALERT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-12-01 00:44:13.084 +00:00', '2025-12-01 00:44:13.091 +00:00', '2025-12-01 00:44:13.091 +00:00'),
('e1267fd2-e580-4db9-ada5-422b86fd2cf8', '7298b1fa-60f2-46d0-9b43-6e69ddabc458', NULL, NULL, 'ALL', 'PNL_MAX', 50000, 'EUR', 'DAILY', NULL, 1, 'RESTRICT', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '2025-12-01 00:44:13.084 +00:00', '2025-12-01 00:44:13.097 +00:00', '2025-12-01 00:44:13.097 +00:00');

INSERT INTO email_verification_tokens (token_id, user_id, token, expires_at, is_used, created_at, updated_at) VALUES
(1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', '260651', '2025-11-30 21:16:13.790 +00:00', 0, '2025-11-30 21:01:13.790 +00:00', '2025-11-30 21:01:13.790 +00:00');

INSERT INTO stress_scenarios (scenario_id, name, description, scenario_type, market_shocks, probability, time_horizon_days, is_active, created_by, approved_by, approval_date, created_at, updated_at) VALUES
('538de554-2fec-4d38-a500-497429dfeae2', 'Equity Market Crash', 'Simulates a 20% drop in global equity markets', 'HYPOTHETICAL', '"{\"equity\":-0.2,\"rates\":0.01,\"fx\":{\"USD\":-0.05,\"GBP\":-0.03}}"', 0.05, 1, 1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', NULL, NULL, '2025-12-01 00:20:32.728 +00:00', '2025-12-01 00:50:38.853 +00:00'),
('7f8e9d1a-2b3c-4d5e-6f7g-8h9i0j1k2l3m', 'Interest Rate Shock +2%', 'Simulates a 2% increase in interest rates', 'HYPOTHETICAL', '"{\"equity\":-0.05,\"rates\":0.02,\"fx\":{\"EUR\":0.02,\"GBP\":0.015}}"', NULL, 1, 1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', NULL, NULL, '2025-12-01 00:50:38.862 +00:00', '2025-12-01 00:50:38.862 +00:00'),
('4n5o6p7q-8r9s0t1u-2v3w4x5y-6z7a8b9c0d1e', 'FX Crisis - EUR/USD', 'Simulates a 15% depreciation of EUR against USD', 'HYPOTHETICAL', '"{\"equity\":-0.08,\"rates\":0.005,\"fx\":{\"EUR\":-0.15,\"GBP\":-0.1}}"', NULL, 1, 1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', NULL, NULL, '2025-12-01 00:50:38.868 +00:00', '2025-12-01 00:50:38.868 +00:00'),
('2f3g4h5i-6j7k8l9m-0n1o2p3q-4r5s6t7u8v9w', 'Credit Spread Widening', 'Simulates widening of credit spreads by 100bps', 'HYPOTHETICAL', '"{\"equity\":-0.03,\"rates\":0.005,\"credit_spread\":0.01,\"fx\":{\"USD\":-0.02}}"', NULL, 5, 1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', NULL, NULL, '2025-12-01 00:50:38.875 +00:00', '2025-12-01 00:50:38.875 +00:00'),
('9x0y1z2a-3b4c5d6e-7f8g9h0i-1j2k3l4m5n6o', 'Combined Stress Scenario', 'Severe combined stress: -30% equities, +3% rates, -20% FX', 'HYPOTHETICAL', '"{\"equity\":-0.3,\"rates\":0.03,\"fx\":{\"EUR\":-0.2,\"GBP\":-0.15,\"USD\":-0.1},\"credit_spread\":0.015}"', NULL, 10, 1, 'd9804bb1-bf8d-405e-a227-127deda8f9e8', NULL, NULL, '2025-12-01 00:50:38.882 +00:00', '2025-12-01 00:50:38.882 +00:00');

