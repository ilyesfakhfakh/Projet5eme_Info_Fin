{
  "info": {
    "name": "Finserve - Auth & Users",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "3e5f0d2b-2bcb-4a8a-a3a7-9b40f0c9c001"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      { "key": "token", "value": "{{token}}", "type": "string" }
    ]
  },
  "item": [
    {
      "name": "Auth - Register",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/auth/register",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","auth","register"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\": \"john\",\n  \"email\": \"john@example.com\",\n  \"password\": \"Test@123\",\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\"\n}"
        }
      }
    },
    {
      "name": "Auth - Login (Admin)",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Content-Type", "value": "application/json"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/auth/login",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","auth","login"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"Admin@12345\"\n}"
        }
      }
      ,
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "try {",
              "  const data = pm.response.json();",
              "  if (data && data.token) { pm.environment.set('token', data.token); }",
              "  if (data && data.session_id) { pm.environment.set('session_id', data.session_id); }",
              "  if (data && data.user && data.user.user_id) { pm.environment.set('user_id', data.user.user_id); }",
              "} catch (e) { }"
            ]
          }
        }
      ]
    },
    {
      "name": "Roles - List",
      "request": {
        "method": "GET",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/roles",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","roles"]
        }
      }
    },
    {
      "name": "Users - List",
      "request": {
        "method": "GET",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/users?page=1&pageSize=20",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","users"],
          "query": [
            {"key": "page", "value": "1"},
            {"key": "pageSize", "value": "20"}
          ]
        }
      }
    },
    {
      "name": "Users - Set Roles",
      "request": {
        "method": "PUT",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/users/{{user_id}}/roles",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","users","{{user_id}}","roles"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"roles\": [\"ADMIN\"]\n}"
        }
      }
    },
    {
      "name": "Users - Get By Id",
      "request": {
        "method": "GET",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/users/{{user_id}}",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","users","{{user_id}}"]
        }
      }
    },
    {
      "name": "Users - Update",
      "request": {
        "method": "PUT",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/users/{{user_id}}",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","users","{{user_id}}"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"first_name\": \"Updated\",\n  \"last_name\": \"User\"\n}"
        }
      }
    },
    {
      "name": "Users - Delete",
      "request": {
        "method": "DELETE",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/users/{{user_id}}",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","users","{{user_id}}"]
        }
      }
    },
    {
      "name": "Auth - Logout",
      "request": {
        "method": "POST",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/auth/logout",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","auth","logout"]
        }
      }
    },
    {
      "name": "Roles - Get By Id",
      "request": {
        "method": "GET",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/roles/{{role_id}}",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","roles","{{role_id}}"]
        }
      }
    },
    {
      "name": "Roles - Update",
      "request": {
        "method": "PUT",
        "header": [
          {"key": "Content-Type", "value": "application/json"},
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/roles/{{role_id}}",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","roles","{{role_id}}"]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"permissions\": [\"VIEW_USERS\", \"MANAGE_USERS\"]\n}"
        }
      }
    },
    {
      "name": "Roles - Delete",
      "request": {
        "method": "DELETE",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/roles/{{role_id}}",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","roles","{{role_id}}"]
        }
      }
    }
    ,
    {
      "name": "Auth - Me",
      "request": {
        "method": "GET",
        "header": [
          {"key": "Authorization", "value": "Bearer {{token}}"}
        ],
        "url": {
          "raw": "https://localhost:3200/api/v1/auth/me",
          "protocol": "https",
          "host": ["localhost"],
          "port": "3200",
          "path": ["api","v1","auth","me"]
        }
      }
    }
  ],
  "event": [],
  "variable": [
    {"key": "token", "value": ""},
    {"key": "user_id", "value": ""},
    {"key": "role_id", "value": ""},
    {"key": "session_id", "value": ""}
  ]
}
